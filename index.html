<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
<title>??????? ??????? ???? ?????????</title>
<link rel="icon" type="image/png" href="1.png"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap" rel="stylesheet"/>
<style>
:root {
  --primary: #2c3e50;
  --secondary: #3498db;
  --light: #f5f7fa;
  --danger: #e74c3c;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: 'Noto Naskh Arabic', serif;
  background:var(--light);
  color:#222;
  direction:rtl;
  -webkit-font-smoothing:antialiased;
}
header{position:relative;width:100%;overflow:hidden}
header img{width:100%;height:auto;display:block;object-fit:cover}
.header-title{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
.header-title h1{
  margin:0;
  background:rgba(0,0,0,0.55);
  color:#fff;
  padding:12px 18px;
  border-radius:10px;
  font-size:clamp(18px,3.2vw,28px);
  pointer-events:auto;
  text-align:center;
}
.container{max-width:920px;margin:14px auto;padding:12px}
.progress-container{width:100%;background:#ddd;border-radius:8px;height:10px;overflow:hidden;margin:12px 0}
.progress-bar{height:100%;background:var(--secondary);width:0;transition:width .25s}
form{margin-top:6px}
fieldset{
  background:#fff;border:1px solid #e3e6ea;border-radius:12px;
  padding:14px;margin:18px 0;box-shadow:0 6px 18px rgba(20,30,40,0.04)
}
legend{font-weight:700;color:var(--primary);padding:0 8px}
label{display:block;margin:8px 0;font-size:0.98rem}
input[type="text"], input[type="number"], input[type="date"], input[type="time"], select, textarea{
  width:100%;padding:10px;border-radius:8px;border:1px solid #d1d7dd;font-size:1rem;background:#fff;
}
textarea{min-height:80px;resize:vertical}
.radio-group, .checkbox-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px;margin-top:6px}
.radio-option, .checkbox-option{display:flex;align-items:center;gap:8px}
.inline{display:flex;gap:12px;flex-wrap:wrap}
.small{font-size:0.9rem;color:#555}
.badge{display:inline-block;background:var(--secondary);color:#fff;padding:4px 8px;border-radius:999px;font-size:0.8rem;margin-inline-start:8px}
.nav-buttons{display:flex;gap:10px;margin:10px 0}
.nav-buttons button{flex:1;padding:12px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
.btn-primary{background:var(--secondary);color:#fff}
.btn-secondary{background:#fff;border:1px solid #cbd5df;color:var(--primary)}
.btn-disabled{background:#9aa7b2;color:#fff;cursor:not-allowed}
.required::after{content:" *";color:var(--danger)}
.error{border-color:var(--danger) !important;box-shadow:0 0 0 3px rgba(231,76,60,0.06)}
footer{margin:18px 0;text-align:center;color:#666;font-size:0.95rem}
@media (max-width:520px){
  .header-title h1{font-size:18px;padding:8px 12px}
  fieldset{padding:12px;margin:12px 0}
}
</style>
</head>
<body>

<header>
  <img src="1.png" alt="Banner">
  <div class="header-title"><h1>??????? ??????? ???? ?????????</h1></div>
</header>

<div class="container">
  <div class="small">?????? ????? — ????? ????????. ????? ?? ??? ????????? ?? ??? ??????? ??????? ??? ?????? ????? ?????????.</div>
  <div class="progress-container"><div id="progressBar" class="progress-bar"></div></div>

  <!-- Form: change action to your Apps Script or desired endpoint -->
  <form id="taxiForm" method="POST" action="https://script.google.com/macros/s/AKfycbxcuBjbEjQCsrqh30PKOnlHX7AqQrTrD_xxP8mAuW84fhBaImkDAtTWrkYJuCS5x_UE/exec" onsubmit="return checkConsent();">
    <input type="hidden" name="form-name" value="taxiForm">
    <p style="display:none"><label>?? ???? ??? ?????: <input name="bot-field"></label></p>

    <!-- SECTION 0: ?????? ?????? -->
    <fieldset id="section0">
      <legend>??? ??????</legend>
      <label class="required">??? ??????<input type="text" name="identifiant_enqueteur" required></label>
      <label class="required">??????? / ???????<input type="text" name="ville" required></label>
      <label>????? ??????<input type="text" name="lieu_entretien"></label>
      <div class="inline">
        <label>???????<input type="date" name="date_enquete"></label>
        <label>?????<input type="time" name="heure_enquete"></label>
      </div>
      <div class="small">????? ???? ??? ??????? ??? ???? ???? ????? ???????.</div>
    </fieldset>

    <!-- SECTION 1: ????? ?????? ??????? ??????? -->
    <fieldset id="section1" style="display:none">
      <legend>1) ????? ?????? ??????? ???????</legend>

      <label class="required">??? ???????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="type_taxi" value="????? ????" required> ????? ????</label>
          <label class="radio-option"><input type="radio" name="type_taxi" value="????? ????" required> ????? ????</label>
        </div>
      </label>

      <label class="required">????? ???????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="age" value="??? ?? 30" required> ??? ?? 30 ???</label>
          <label class="radio-option"><input type="radio" name="age" value="31-45" required> ?? 31 ??? 45 ???</label>
          <label class="radio-option"><input type="radio" name="age" value="45-60" required> ?? 45 ??? 60 ???</label>
          <label class="radio-option"><input type="radio" name="age" value="???? ?? 60" required> ???? ?? 60 ???</label>
        </div>
      </label>

      <label class="required">???? ????? ?????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="permis_confiance" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="permis_confiance" value="??" required> ??</label>
        </div>
      </label>

      <label class="required">???? ?????? ?????? ?????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="carte_conducteur" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="carte_conducteur" value="??" required> ??</label>
        </div>
      </label>

      <label class="required">??????? ???????
        <select name="niveau_instruction" required>
          <option value="">?????...</option>
          <option value="?? ?????">?? ?????</option>
          <option value="???????">???????</option>
          <option value="??????">??????</option>
          <option value="?????">?????</option>
          <option value="????? ????">????? ????</option>
        </select>
      </label>

      <label>??????
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="langues[]" value="????????"> ????????</label>
          <label class="checkbox-option"><input type="checkbox" name="langues[]" value="??????????"> ??????????</label>
          <label class="checkbox-option"><input type="checkbox" name="langues[]" value="?????????"> ?????????</label>
          <label class="checkbox-option"><input type="checkbox" name="langues[]" value="?????????"> ?????????</label>
          <label class="checkbox-option"><input type="checkbox" name="langues[]" value="?????????"> ?????????</label>
          <label class="checkbox-option"><input type="text" name="langue_autre" placeholder="????..."></label>
        </div>
      </label>

      <hr>

      <label class="required">?? ??? ???? ??????? 
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="detenteur_agrement" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="detenteur_agrement" value="??" required> ??</label>
        </div>
      </label>

      <div id="bloc_contrat" style="display:none">
        <label class="required">??? ??: ?? ???? ??? ??????? ?? ??? ?????????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="contrat_licence" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="contrat_licence" value="??"> ??</label>
          </div>
        </label>

        <div id="bloc_type_contrat" style="display:none">
          <label>??? ?????
            <div class="radio-group">
              <label class="radio-option"><input type="radio" name="type_contrat" value="?????"> ?????</label>
              <label class="radio-option"><input type="radio" name="type_contrat" value="????"> ????</label>
              <label class="radio-option"><input type="radio" name="type_contrat" value="????"> ????</label>
              <input type="text" name="type_contrat_autre" placeholder="???...">
            </div>
          </label>
        </div>
      </div>

      <label class="required">?? ??? ???? ????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="proprietaire_taxi" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="proprietaire_taxi" value="??" required> ??</label>
        </div>
      </label>

      <label class="required">?????? ???????
        <select name="statut_professionnel" required>
          <option value="">?????...</option>
          <option value="??">??</option>
          <option value="????">????</option>
          <option value="????">????</option>
        </select>
      </label>

      <label class="required">???????? ?? ???????
        <select name="anciennete" required>
          <option value="">?????...</option>
          <option value="??? ?? ???">??? ?? ???</option>
          <option value="1-5">?? 1 ??? 5 ????</option>
          <option value="5-10">?? 5 ??? 10 ????</option>
          <option value="10-20">?? 10 ??? 20 ???</option>
          <option value="???? ?? 20">???? ?? 20 ???</option>
        </select>
      </label>

      <label class="required">??????? ?????
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="formations[]" value="????? ????"> ????? ????</label>
          <label class="checkbox-option"><input type="checkbox" name="formations[]" value="????? ?????"> ????? ?????</label>
          <label class="checkbox-option"><input type="checkbox" name="formations[]" value="?? ????"> ?? ????</label>
        </div>
      </label>

      <label class="required">???? ??????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="lieu_activite" value="????" required> ????</label>
          <label class="radio-option"><input type="radio" name="lieu_activite" value="????" required> ????</label>
          <label class="radio-option"><input type="radio" name="lieu_activite" value="?? ??? ????????" required> ?? ??? ????????</label>
          <label class="radio-option"><input type="radio" name="lieu_activite" value="?? ??? ????????" required> ?? ??? ????????</label>
        </div>
      </label>

      <div class="inline">
        <label class="required">????? ???? (AMO)
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="couverture_medicale" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="couverture_medicale" value="??" required> ??</label>
          </div>
        </label>

        <label class="required">???? ?? ???? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="regime_pension" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="regime_pension" value="??" required> ??</label>
          </div>
        </label>

        <label class="required">??????? ?? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="retraite" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="retraite" value="??" required> ??</label>
          </div>
        </label>
      </div>

      <div class="inline">
        <label class="required">???? ?? ????? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="shifts_par_jour" value="1" required> 1</label>
            <label class="radio-option"><input type="radio" name="shifts_par_jour" value="2" required> 2</label>
            <label class="radio-option"><input type="radio" name="shifts_par_jour" value="????" required> ????</label>
          </div>
        </label>

        <label class="required">???? ?? ????? ????? ??? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="nb_chauffeurs" value="1" required> 1</label>
            <label class="radio-option"><input type="radio" name="nb_chauffeurs" value="2" required> 2</label>
            <label class="radio-option"><input type="radio" name="nb_chauffeurs" value="????" required> ????</label>
          </div>
        </label>
      </div>

      <label>????? ??????? ??????? ???????<textarea name="organisation_chauffeurs" rows="2"></textarea></label>

      <div class="inline">
        <label class="required">??? ?????? ??????? (???????)<input type="number" name="temps_travail" min="1" max="24" required></label>
        <label class="required">???? ??????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="travail_nuit" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="travail_nuit" value="??" required> ??</label>
          </div>
        </label>
      </div>

      <div class="inline">
        <label class="required">??? ???? ?????? ????????<input type="number" name="jours_travail_semaine" min="1" max="7" required></label>
        <label class="required">?????? ??????? (????)<input type="number" name="conge_annuel" min="0" required></label>
      </div>

      <label>????? ??? ???? ???? ?? ??? ????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="autre_activite" value="???"> ???</label>
          <label class="radio-option"><input type="radio" name="autre_activite" value="??"> ??</label>
        </div>
      </label>
      <label id="preciser_activite_label" style="display:none;">??? ?????? ??????<input type="text" name="autre_activite_precision"></label>

    </fieldset>

    <!-- SECTION 2: ????? ?????? ??????? -->
    <fieldset id="section2" style="display:none">
      <legend>2) ????? ?????? ??????? ???????</legend>
      <p class="small">???? ??? ?????? ???????? ??? ????? ???? ?????.</p>

      <label class="required">??? ??????? ??????? ???????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="station_suffisante" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="station_suffisante" value="??" required> ??</label>
        </div>
      </label>

      <label class="required">??? ???? ?????/???? ????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="responsable_station" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="responsable_station" value="??" required> ??</label>
        </div>
      </label>

      <label class="required">??? ?????? ????? ??????/??????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="regles_priorite" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="regles_priorite" value="??" required> ??</label>
        </div>
      </label>
      <div id="respect_regles_label" style="display:none">
        <label>??? ????? ??? ?????????
          <select name="respect_regles">
            <option value="????">????</option>
            <option value="???????">???????</option>
            <option value="??????">??????</option>
            <option value="????">????</option>
          </select>
        </label>
      </div>

      <label class="required">??? ?????? ??????? ?? ?????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="pointage_controle" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="pointage_controle" value="??" required> ??</label>
        </div>
      </label>

      <div id="bloc_controle" style="display:none">
        <label>???? ??????? <input type="text" name="autorite_controle" placeholder="?????/??????"></label>
        <label>??? ???????? ??????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="controle_efficace" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="controle_efficace" value="??"> ??</label>
          </div>
        </label>

        <label>?????? ????? ??????????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="pointage_systeme" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="pointage_systeme" value="??"> ??</label>
          </div>
        </label>

        <div id="bloc_pointage" style="display:none">
          <label>????? ?????????
            <div class="radio-group">
              <label class="radio-option"><input type="radio" name="frequence_pointage" value="????"> ????</label>
              <label class="radio-option"><input type="radio" name="frequence_pointage" value="??????"> ??????</label>
              <label class="radio-option"><input type="radio" name="frequence_pointage" value="?? ??? ???????"> ?? ??? ???????</label>
              <label class="radio-option"><input type="radio" name="frequence_pointage" value="????"> ????</label>
              <input type="text" name="frequence_pointage_autre" placeholder="???...">
            </div>
          </label>
          <label>???? ?????? ??????????<input type="text" name="responsable_pointage"></label>
        </div>
      </div>

      <hr>

      <label class="required">?? ?? ????? ??????
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="service_mode[]" value="????? ?? ????"> ????? - ?? ????</label>
          <label class="checkbox-option"><input type="checkbox" name="service_mode[]" value="????? ??? ?????"> ????? - ??? ?????</label>
          <label class="checkbox-option"><input type="checkbox" name="service_mode[]" value="???????"> ???????? (???? ??? ???)</label>
        </div>
      </label>

      <div id="bloc_collectif" style="display:none">
        <label>????? ???? ????? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="partage_paiement" value="??? ??? ???????"> ??? ??? ???????</label>
            <label class="radio-option"><input type="radio" name="partage_paiement" value="????????"> ????????</label>
            <label class="radio-option"><input type="radio" name="partage_paiement" value="????"> ????</label>
            <input type="text" name="partage_paiement_autre" placeholder="???...">
          </div>
        </label>
      </div>

      <label class="required">?????:
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="type_service" value="????" required> ????? (???? ????)</label>
          <label class="radio-option"><input type="radio" name="type_service" value="??? ??? ?????" required> ??? ??? ?????</label>
        </div>
      </label>

      <!-- bloc ligne -->
      <div id="bloc_ligne" style="display:none">
        <label>??? ?? ???? ?????? ?????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="choix_ligne" value="?????"> ???????</label>
            <label class="radio-option"><input type="radio" name="choix_ligne" value="?????? ????"> ?????? ????</label>
            <label class="radio-option"><input type="radio" name="choix_ligne" value="??? ?????"> ??? ?????</label>
            <label class="radio-option"><input type="radio" name="choix_ligne" value="????"> ????</label>
            <input type="text" name="choix_ligne_autre" placeholder="???...">
          </div>
        </label>

        <label>??? ???? ????? ???? ????? ?? ??? ???
          <div class="checkbox-group">
            <label class="checkbox-option"><input type="checkbox" name="organisation_ligne[]" value="????? ??????"> ????? ??????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_ligne[]" value="??????? ???????"> ??????? ???????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_ligne[]" value="?????/?????"> ?????/?????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_ligne[]" value="??"> ??</label>
          </div>
        </label>

        <label>????? ??????? ????? ???? ??????
          <div class="checkbox-group">
            <label class="checkbox-option"><input type="checkbox" name="info_ligne[]" value="?????? ???????"> ?????? ???????</label>
            <label class="checkbox-option"><input type="checkbox" name="info_ligne[]" value="?????? ????????"> ?????? ????????</label>
            <label class="checkbox-option"><input type="checkbox" name="info_ligne[]" value="?????"> ?????</label>
            <label class="checkbox-option"><input type="checkbox" name="info_ligne[]" value="?????"> ??? ?????</label>
            <label class="checkbox-option"><input type="text" name="info_ligne_autre" placeholder="????..."></label>
          </div>
        </label>
      </div>

      <!-- bloc demande -->
      <div id="bloc_demande" style="display:none">
        <label>??? ???? ????? ????? ????????/???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="zones_preferees" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="zones_preferees" value="??"> ??</label>
          </div>
        </label>

        <label>???? ??????? ??? ????????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="choix_zones" value="???????"> ???????</label>
            <label class="radio-option"><input type="radio" name="choix_zones" value="???????"> ???????</label>
            <label class="radio-option"><input type="radio" name="choix_zones" value="??? ??????"> ??? ???????</label>
          </div>
        </label>

        <label>????? ?????? ?????????
          <div class="checkbox-group">
            <label class="checkbox-option"><input type="checkbox" name="criteres_zones[]" value="?????"> ??? ?????</label>
            <label class="checkbox-option"><input type="checkbox" name="criteres_zones[]" value="????? ?? ?????"> ????? ?? ?????</label>
            <label class="checkbox-option"><input type="checkbox" name="criteres_zones[]" value="?????"> ?????</label>
            <label class="checkbox-option"><input type="text" name="criteres_zones_autre" placeholder="????..."></label>
          </div>
        </label>

        <label>??? ???? ????? ??? ???????? ?? ??? ???
          <div class="checkbox-group">
            <label class="checkbox-option"><input type="checkbox" name="organisation_demande[]" value="??????"> ??????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_demande[]" value="??????? ???????"> ??????? ???????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_demande[]" value="?????/?????"> ?????/?????</label>
            <label class="checkbox-option"><input type="checkbox" name="organisation_demande[]" value="??"> ??</label>
          </div>
        </label>
      </div>

      <hr>

      <label class="required">??? ?????? ????? ????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="conflits_station" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="conflits_station" value="??" required> ??</label>
        </div>
      </label>
      <label id="nature_conflits_label" style="display:none">?????/????????<textarea name="nature_conflits" rows="2"></textarea></label>

      <label class="required">??? ??????? ?????? ??? ??? ?????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="intervention_autorites" value="???" required> ???</label>
          <label class="radio-option"><input type="radio" name="intervention_autorites" value="??" required> ??</label>
        </div>
      </label>
    </fieldset>

    <!-- SECTION 3: ??????? ?????????? -->
    <fieldset id="section3" style="display:none">
      <legend>3) ??????? ?????????? ??????? ??????</legend>

      <label class="required">????? ??????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="modalite_retribution" value="????? ?????" required> ????? ?????</label>
          <label class="radio-option"><input type="radio" name="modalite_retribution" value="???? ?? ????????" required> ???? ?? ????????</label>
          <label class="radio-option"><input type="radio" name="modalite_retribution" value="??? ????????" required> ??? ????????</label>
          <label class="radio-option"><input type="radio" name="modalite_retribution" value="????" required> ????</label>
        </div>
      </label>
      <label id="autre_retribution_label" style="display:none">???<input type="text" name="autre_modalite_retribution"></label>

      <div class="inline">
        <label class="required">???????? (????/?????)<input type="number" name="depense_carburant" min="0" required></label>
        <label>???? ??????? (????/?????)<input type="number" name="depense_location" min="0"></label>
      </div>

      <div class="inline">
        <label>???????/???????/????? ?????? (????/?????)<input type="number" name="depense_entretien" min="0"></label>
        <label>???? — ??????<input type="number" name="autres_depenses_montant" min="0"></label>
      </div>
      <label>???? — ????? <input type="text" name="autres_depenses_periodicite" placeholder="?? ?????/???/..."></label>

      <div class="inline">
        <label>???? ???? ??????? (????/?????)<input type="number" name="redevance_mois" min="0"></label>
        <label>???? ??????? ??? ????? ????????<input type="number" name="redevance_signature" min="0"></label>
      </div>

      <label>????? ???????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="periodicite_redevance" value="10 ????"> 10 ????</label>
          <label class="radio-option"><input type="radio" name="periodicite_redevance" value="12 ???"> 12 ???</label>
          <label class="radio-option"><input type="radio" name="periodicite_redevance" value="????"> ????</label>
          <input type="text" name="autre_periodicite_redevance" placeholder="???...">
        </div>
      </label>

      <div class="inline">
        <label class="required">??????? ??????? (??)<input type="number" name="distance_parcourue" min="1" required></label>
        <label class="required">??? ???????? ???????<input type="number" name="courses_par_jour" min="0" required></label>
        <label class="required">??? ?????? ???????<input type="number" name="passagers_par_jour" min="0" required></label>
      </div>

      <label>???? ?????? ?????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="prise_charge_assurance" value="????"> ????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_assurance" value="??????"> ??????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_assurance" value="??????"> ??????</label>
        </div>
      </label>
      <label id="part_assurance_label" style="display:none">???? ??????? (%)<input type="number" name="part_assurance" min="0" max="100"></label>

      <label>???? ?????? ?????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="prise_charge_entretien" value="????"> ????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_entretien" value="??????"> ??????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_entretien" value="??????"> ??????</label>
        </div>
      </label>
      <label id="part_entretien_label" style="display:none">???? ??????? (%)<input type="number" name="part_entretien" min="0" max="100"></label>

      <label>???? ?????? ???????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="prise_charge_reparations" value="????"> ????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_reparations" value="??????"> ??????</label>
          <label class="radio-option"><input type="radio" name="prise_charge_reparations" value="??????"> ??????</label>
        </div>
      </label>
      <label id="part_reparations_label" style="display:none">???? ??????? (%)<input type="number" name="part_reparations" min="0" max="100"></label>

      <div class="inline">
        <label class="required">???????? ??? ????????/????? (????)<input type="number" name="revenu_brut" min="0" required></label>
        <label class="required">???????? ???????/????? (????)<input type="number" name="revenu_net" min="0" required></label>
      </div>

      <label>??????? ?? ????? ??????? ?????????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="outil_suivi" value="????"> ????</label>
          <label class="radio-option"><input type="radio" name="outil_suivi" value="?????"> ?????</label>
          <label class="radio-option"><input type="radio" name="outil_suivi" value="?? ???"> ?? ???</label>
        </div>
      </label>

      <label>???? ???? ??? ????
        <div class="radio-group">
          <label class="radio-option"><input type="radio" name="autre_revenu" value="???"> ???</label>
          <label class="radio-option"><input type="radio" name="autre_revenu" value="??"> ??</label>
        </div>
      </label>
      <label id="preciser_revenu_label" style="display:none">??? ????? ?????<input type="text" name="autre_revenu_precision"></label>
    </fieldset>

    <!-- SECTION 4: ???? ??? ?????? -->
    <fieldset id="section4" style="display:none">
      <legend>4) ???? ??? ?????? ????? ???????</legend>

      <label class="required">???? ????? ??3 ???? ?? ??? 
        <select name="evolution_demande" required>
          <option value="">?????...</option>
          <option value="???? ????">???? ????</option>
          <option value="???? ????">???? ????</option>
          <option value="?????">?????</option>
          <option value="?? ????">?? ????</option>
        </select>
      </label>

      <label>???????? ????????
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="concurrence[]" value="??????? ?????"> ??????? ?????</label>
          <label class="checkbox-option"><input type="checkbox" name="concurrence[]" value="????? ????????"> ????? ????????</label>
          <label class="checkbox-option"><input type="checkbox" name="concurrence[]" value="???????"> ???????</label>
          <label class="checkbox-option"><input type="checkbox" name="concurrence[]" value="??????? ????"> ??????? ????</label>
          <label class="checkbox-option"><input type="checkbox" name="concurrence[]" value="??? ???"> ????</label>
        </div>
      </label>

      <div class="inline">
        <label class="required">???? ?????????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="smartphone" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="smartphone" value="??" required> ??</label>
          </div>
        </label>

        <label>??????? ????? ???? ??????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="app_reservation" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="app_reservation" value="??"> ??</label>
          </div>
        </label>

        <label>????? ?????? ???? ????? ??????????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="centrale_telephonique" value="???"> ???</label>
            <label class="radio-option"><input type="radio" name="centrale_telephonique" value="??"> ??</label>
          </div>
        </label>
      </div>

      <label>????? ???? ?? ??????? ?????:
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="equipements[]" value="GPS"> GPS</label>
          <label class="checkbox-option"><input type="checkbox" name="equipements[]" value="?????"> ?????</label>
          <label class="checkbox-option"><input type="checkbox" name="equipements[]" value="??? ????????"> ???? ??? ????????</label>
        </div>
      </label>

      <label>????? ???? ??:
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="integrations[]" value="???????"> ???????</label>
          <label class="checkbox-option"><input type="checkbox" name="integrations[]" value="???? ?????????"> ???? ?????????</label>
          <label class="checkbox-option"><input type="checkbox" name="integrations[]" value="???? ?????"> ???? ?????</label>
          <label class="checkbox-option"><input type="checkbox" name="integrations[]" value="??"> ??</label>
        </div>
      </label>

      <label>??? ??????? ????????
        <div class="checkbox-group">
          <label class="checkbox-option"><input type="checkbox" name="risques[]" value="?????? ???????"> ?????? ???????</label>
          <label class="checkbox-option"><input type="checkbox" name="risques[]" value="???????"> ???????</label>
          <label class="checkbox-option"><input type="checkbox" name="risques[]" value="?????"> ?????</label>
          <label class="checkbox-option"><input type="text" name="risques_autre" placeholder="????..."></label>
        </div>
      </label>
    </fieldset>

    <!-- SECTION 5: ??????? ? ???????? -->
    <fieldset id="section5" style="display:none">
      <legend>5) ????????? ???????????</legend>

      <div class="inline">
        <label class="required">?????? ????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="valorisation_metier" value="??????" required> ??????</label>
            <label class="radio-option"><input type="radio" name="valorisation_metier" value="??? ??????" required> ??? ??????</label>
          </div>
        </label>

        <label class="required">?????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="stabilite_metier" value="??????" required> ??????</label>
            <label class="radio-option"><input type="radio" name="stabilite_metier" value="?? ?????" required> ?? ?????</label>
          </div>
        </label>

        <label class="required">???? ???? ???? ???????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="continuer_metier" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="continuer_metier" value="??" required> ??</label>
          </div>
        </label>

        <label class="required">????? ??? ??????? ??????
          <div class="radio-group">
            <label class="radio-option"><input type="radio" name="formation_professionnelle" value="???" required> ???</label>
            <label class="radio-option"><input type="radio" name="formation_professionnelle" value="??" required> ??</label>
          </div>
        </label>
      </div>

      <label class="required">???? 3 ????? ????
        <input type="text" name="probleme1" placeholder="?????? 1" required>
        <input type="text" name="probleme2" placeholder="?????? 2" required>
        <input type="text" name="probleme3" placeholder="?????? 3" required>
      </label>

      <label>???????? ????? ??????? (????? ?????... )<textarea name="propositions" rows="4"></textarea></label>
    </fieldset>

    <!-- Navigation buttons -->
    <div class="nav-buttons" id="navButtons">
      <button type="button" id="prevBtn" class="btn-secondary" onclick="prevSection()">??????</button>
      <button type="button" id="nextBtn" class="btn-primary" onclick="nextSection()">???????</button>
    </div>

    <div style="text-align:center;margin-top:8px">
      <button type="submit" id="submitBtn" class="btn-primary" style="display:none;width:100%">???? ?????????</button>
    </div>

  </form>

  <footer>© ???? ?????? ?????? — ??????? ????? ?????????</footer>
</div>

<script>
/* Wizard state */
let currentSection = 0;
const totalSections = 6; // sections 0..5

function showSection(i){
  for(let s=0;s<totalSections;s++){
    const sec = document.getElementById('section'+s);
    if(sec) sec.style.display = (s===i)?'block':'none';
  }
  document.getElementById('prevBtn').style.display = (i===0)?'none':'inline-block';
  document.getElementById('nextBtn').style.display = (i===totalSections-1)?'none':'inline-block';
  document.getElementById('submitBtn').style.display = (i===totalSections-1)?'inline-block':'none';
  updateProgressBar();
  window.scrollTo({top:0,behavior:'smooth'});
}

function nextSection(){
  if(!validateSection(currentSection)) return;
  currentSection = Math.min(currentSection+1, totalSections-1);
  showSection(currentSection);
}
function prevSection(){
  currentSection = Math.max(currentSection-1,0);
  showSection(currentSection);
}

/* Basic validation: required fields in visible section */
function validateSection(idx){
  const section = document.getElementById('section'+idx);
  const requiredControls = section.querySelectorAll('[required]');
  let ok = true;
  requiredControls.forEach(ctrl=>{
    if(ctrl.type === 'radio'){
      const group = section.querySelectorAll('input[name="'+ctrl.name+'"]');
      const anyChecked = Array.from(group).some(r=>r.checked);
      if(!anyChecked){ ok=false; group.forEach(g=>g.classList.add('error')); }
      else group.forEach(g=>g.classList.remove('error'));
    } else {
      if(!ctrl.value || ctrl.value.trim()===""){ ctrl.classList.add('error'); ok=false; }
      else ctrl.classList.remove('error');
    }
  });
  if(!ok){ alert('????? ????? ?????? ????????? (*) ???? ?????.'); }
  return ok;
}

/* Progress bar */
function updateProgressBar(){
  const percent = (currentSection/(totalSections-1))*100;
  document.getElementById('progressBar').style.width = percent + '%';
}

/* Consent check on submit (if needed). If you used initial consent radio, adapt here. */
function checkConsent(){
  // if you want a required consent step, implement here. Currently returns true.
  return true;
}

/* Conditional UI logic based on answers */
function toggle(id, show){ const el=document.getElementById(id); if(!el) return; el.style.display = show ? 'block' : 'none'; }

/* detenteur_agrement -> contrat */
document.querySelectorAll('input[name="detenteur_agrement"]').forEach(r=>{
  r.addEventListener('change', e => toggle('bloc_contrat', e.target.value === '??'));
});
document.querySelectorAll('input[name="contrat_licence"]').forEach(r=>{
  r.addEventListener('change', e => toggle('bloc_type_contrat', e.target.value === '???'));
});

/* autre activité */
document.querySelectorAll('input[name="autre_activite"]').forEach(r=>{
  r.addEventListener('change', e => toggle('preciser_activite_label', e.target.value === '???'));
});

/* règles priorité */
document.querySelectorAll('input[name="regles_priorite"]').forEach(r=>{
  r.addEventListener('change', e => toggle('respect_regles_label', e.target.value === '???'));
});

/* contrôle & pointage */
document.querySelectorAll('input[name="pointage_controle"]').forEach(r=>{
  r.addEventListener('change', e => toggle('bloc_controle', e.target.value === '???'));
});
document.querySelectorAll('input[name="pointage_systeme"]').forEach(r=>{
  r.addEventListener('change', e => toggle('bloc_pointage', e.target.value === '???'));
});

/* service collectif -> partage */
function updateCollectif(){
  const checked = Array.from(document.querySelectorAll('input[name="service_mode[]"]')).some(c=>c.checked && c.value.includes('?????'));
  toggle('bloc_collectif', checked);
}
document.querySelectorAll('input[name="service_mode[]"]').forEach(c=>c.addEventListener('change', updateCollectif));

/* type service: ligne vs demande */
document.querySelectorAll('input[name="type_service"]').forEach(r=>{
  r.addEventListener('change', e=>{
    toggle('bloc_ligne', e.target.value === '????');
    toggle('bloc_demande', e.target.value === '??? ??? ?????');
  });
});

/* partage percent inputs */
document.querySelectorAll('input[name="prise_charge_assurance"]').forEach(r=>r.addEventListener('change', e=>toggle('part_assurance_label', e.target.value==='??????')));
document.querySelectorAll('input[name="prise_charge_entretien"]').forEach(r=>r.addEventListener('change', e=>toggle('part_entretien_label', e.target.value==='??????')));
document.querySelectorAll('input[name="prise_charge_reparations"]').forEach(r=>r.addEventListener('change', e=>toggle('part_reparations_label', e.target.value==='??????')));

/* conflits */
document.querySelectorAll('input[name="conflits_station"]').forEach(r=>r.addEventListener('change', e=>toggle('nature_conflits_label', e.target.value==='???')));

/* autre retribution */
document.querySelectorAll('input[name="modalite_retribution"]').forEach(r=>r.addEventListener('change', e=>toggle('autre_retribution_label', e.target.value==='????')));

/* autre revenu */
document.querySelectorAll('input[name="autre_revenu"]').forEach(r=>r.addEventListener('change', e=>toggle('preciser_revenu_label', e.target.value==='???')));

/* init */
showSection(0);
updateCollectif();

/* small UX: disable submit while sending */
document.getElementById('taxiForm').addEventListener('submit', function(e){
  const btn = document.getElementById('submitBtn');
  btn.disabled = true;
  btn.textContent = '???? ???????...';
  // allow the form to submit normally; if using fetch, implement here.
  setTimeout(()=>{ btn.disabled=false; btn.textContent='???? ?????????'; }, 5000);
});
</script>

</body>
</html>

